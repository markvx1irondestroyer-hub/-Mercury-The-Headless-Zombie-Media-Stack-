ğŸ§Ÿ Mercury: The Headless Zombie Media Stack
Author: markvx1irondestroyer-hub
Architecture: Ubuntu/Zorin OS | NVIDIA GTX 750 | Docker Compose
ğŸ“– Overview
Mercury is a high-availability, headless media server designed to be a "set and forget" solution. 
It leverages NVIDIA hardware acceleration for transcoding and uses a "Zombie" persistence logicâ€”ensuring that 
if a service or the system hangs, it can be revived with a single command.
ğŸ› ï¸ Pre-Deployment Requirements
Before running the installer, ensure your hardware is ready:
 * OS: Ubuntu 22.04+ or Zorin OS 16+.
 * GPU: NVIDIA GTX 750 (or similar) seated and powered.
 * Storage: At least one secondary drive for media (Paths used: /mnt/DVD_Storage and /media/linux/Expansion).
 * âš ï¸ OPTIONALY if confident you can modify storage paths before you start installing âš ï¸CAREFULLYâš ï¸ 
                                                                                 âš ï¸DOUBLE CHECK EVERYTHINGâš ï¸
â€‹âš ï¸ Critical: The "Mount-First" Rule
â€‹In a Docker-based environment, the order of operations is everything. You must always ensure your 
external drives are mounted and (optionally See below) mount-vault.sh before running the m up command.
â€‹Why this matters:
â€‹When Docker starts a container with a volume mapping (e.g., /media/linux/Expansion), it looks for 
that folder on your host system.
If the drive is NOT mounted: Docker will see an empty directory on your OS Drive. It will "helpfully" create 
that folder and start writing your 50GB movies directly to your small SSD/Boot drive, filling it up and crashing your OS.
The "Ghost" Effect: If you mount the drive after Docker has started, the real drive will "cover up" the folders Docker created. 
You won't see your files, and you'll be left wondering why your disk space is disappearing.
ğŸš€ Installation Steps
1. Clone the Blueprint
Download your personalized scripts from this repository to your home directory:
mkdir ~/mercury && cd ~/mercury
# Download your files from GitHub or copy them into this folder

2. Execute the Foundation Script
The install.sh script automates the installation of NVIDIA drivers, Docker Engine, and the NVIDIA Container Toolkit. 
It also configures your system aliases.
chmod +x install.sh
./install.sh

Note: The system will automatically reboot after completion to initialize the NVIDIA kernel modules.
3. Configure Hardware Mounts
Mercury expects physical drives to be mounted via fstab.
 * Identify your Drive UUIDs: lsblk -f
 * Edit fstab: sudo nano /etc/fstab
 * Add your mounts for DVD_Storage and Expansion.
ğŸ•¹ï¸ The "M" Master Command
Once installed, you no longer need to remember complex Docker commands. Use the single-letter m interface:
| Command | Function |
|----------|--------------------------------------------------------------------------------|
| m up     | Resurrect: Brings the entire Docker stack online in detached mode.             |
| m status | Vitals: Displays real-time drive space, GPU temperature, and container health. |
| m gpu    | Monitor: Live 1-second refresh of the GTX 750 performance.                     |  
| m ps     | Process: Shows which services are running and their network ports.             |
| m reset  | Nuclear: Safely stops the stack, prunes system cache, and restarts fresh.      |
ğŸ“‚ The Stack Composition
The Golden YML deploys the following suite:
 * Core: Jellyfin (Media Server), Tailscale (Remote Access), ttyd (Web Terminal).
 * Automation: Jellyseerr(one click requests) Sonarr (TV), Radarr (Movies), Prowlarr (Indexers).
 * Utility: qBittorrent (Downloads), FlareSolverr (Bypass).(Optional) you can find and add ARM for adding physical 
   Media Blu-rays And DVD with Compatible Disc Drives âš ï¸ please check all Hard Drive and folder Locations match correctly for 
   Radar Sonar and QBittorrent to work properly.
### **Phase 4: The Final Bridge (Web UI Setup)**
Once the stack is running with `m up`, your "Zombie" is alive, but you must manually configure the connections between the apps. 
Access each interface via your server's IP address (or `localhost`) at the following ports:

| App               | Port              | Primary Action |
| :---------------- | :------------ | :------------------------------------------------------------------------------------- |
| **Jellyfin**      | `8096`        | Create your admin account and point libraries to `/data/storage`.                      |
| **qBittorrent**   | `8080`        | Set a custom password immediately in **Settings > Web UI**.                            |
| **Prowlarr**      | `9696`        | Add your Indexers here; they will automatically sync to Sonarr/Radarr.                 |
| **Radarr/Sonarr** | `7878 / 8989` | **Settings > Download Clients**: Add qBittorrent using the container name as the host. |
| **Jellyseerr**    | `5055`        | Connect to your Jellyfin and Radarr/Sonarr via **API Keys** for one-click requests.    |

#### **ğŸ› ï¸ Crucial Integration Steps:**
1. **API Keys**: Navigate to **Settings > General** in Radarr, Sonarr, and Prowlarr to find your unique API Keys. 
Copy these into **Jellyseerr** and **Prowlarr** to "connect the brain" of the stack.
2. **Root Folders**: When setting up Sonarr and Radarr, ensure your "Root Folders" are set to `/data/storage` or `/data/expansion`. 
   This tells the apps exactly where to store your media.
3. **Download Pathing**: In qBittorrent, ensure the save path is directed to your "Landing Zone" on `/data/storage`. 
   Radarr and Sonarr will then automatically move completed files to the "Vault."

## ğŸ’¾ Optional: External Storage "Internal Trick"  (This is so during Reboot Jellyfin and other 
Apps don't wake up before drive mounts to see empty library and cause errors)
If you are using an external USB drive (like the **Expansion** drive) as your primary media Vault, 
Follow these steps to "trick" the system into treating it as a permanent internal drive.

### Benefits:
* **Persistence**: The drive mounts automatically at boot.
* **Safety**: If the drive is unplugged, the system will still boot normally thanks to `nofail` logic.
* **Permissions**: Automatically sets ownership to PUID 1000 for Docker compatibility.

### How to Run:
```bash
chmod +x mount-vault.sh
./mount-vault.sh
ğŸ—ï¸ The Mercury Architecture: Quarantine & Vault Logic
The Built in extra locations are redundant and can be ignored if only using one Hard drive but they 
Allow for expansion and upgrades later if you want to add extra storage later just make sure all 
folders exist in the drive you're using 
â€‹Unlike standard "hardlink" setups that prioritize speed, the Mercury Server is designed for 
Data Integrity and Hardware Longevity. It treats storage as two distinct zones to 
protect the primary collection from corruption and "bad" data.
â€‹â˜£ï¸ Zone 1: The Quarantine (Torrents Drive)
â€‹Purpose: All active and completed downloads reside here.
â€‹Risk Mitigation: Torrenting can be intensive on drive headers and carries a higher risk of "bad" or 
corrupted files. If this drive fails or the filesystem (exFAT/NTFS) corrupts due to high I/O, the permanent 
library remains untouched.
â€‹The Logic: We intentionally use Copy + Delete (instead of Atomic Moves). In the event of a power failure or 
system crash during a transfer, the original file is preserved in the Quarantine until the copy is verified in the Vault.
â€‹ğŸ›ï¸ Zone 2: The Vault (Expansion Drive)
â€‹Purpose: The curated, "approved" library.
â€‹Safety: This drive only sees sequential write operations when a movie is "promoted" from Quarantine. This minimizes 
fragmentation and extends the physical life of the drive.
â—ï¸â—ï¸ PRO TIPS
Add a folder to your phone or pc favs internet tabs with all your Web UIs for quick access 
Make sure your storage locations match up in all apps âš ï¸ SET (QBittorrent Radarr and Sonarr) storage 
Limits to at least 100-200GB this will keep them from completely filling your storage drive
And better for hard drives health. Also you can add a Portainer docker separately to manage 
And control your full stack in one place 
  **ONCE and IF successful Congratulations ğŸŠ ğŸ‘ Enjoy ğŸ˜ 
  **ğŸ§Ÿâ€â™‚ï¸ you now have a Headless Zombie ğŸ§Ÿâ€â™‚ï¸ scouring 
  **The Internet building your media collection ğŸ‘Œ 
â€‹âš ï¸ Safety & Responsibility Disclaimer
â€‹While this stack is designed to be a "set-and-forget" solution, please follow these 
safety guidelines to protect your data and hardware:  
â€‹Check the Code: Always inspect scripts and command strings before running them in your terminal. 
Running unsigned code from the internet carries inherent risks; 
ensure you understand the script's actions before execution.
â€‹Do Not Unplug Active Drives: Once the "Internal Trick" (fstab mount) is active, do not unplug your 
Expansion drive while the system is powered on. 
Abruptly removing a mounted drive can cause filesystem corruption or permanent data loss.
â€‹User Responsibility: By using these scripts, you acknowledge that you are doing so at your own risk.
â€‹Final Disclaimer: The author is not responsible for any data loss, hardware issues, 
or system instability that may occur during the use of this repository.
